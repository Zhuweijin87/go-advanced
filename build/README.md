# 编译 

## 常用命令

1. go build
　　这个命令可以直接使用，也可以带上代码包或源码文件使用。
　　如果是直接使用，表示试图编译当前目录所对应的代码包，如果当前目录不是一个有效的代码包（包含在 $GOPATH/src 目录下）则会报错；如果带上代码包名，则表示编译指定的代码包；如果带上源码文件，则表示编译指定源码文件。
　　GO语言的源码文件分为三类，包括命令源码文件、库源码 文件和测试源码文件。如果编译的是命令源码文件，或包含命令源码文件的包（main包）时，编译通过后会生成可执行文件；反之则不会生成任何文件，只是做检查性编译。

　　可以在执行 go build 命令时，加上一些标记，如：
　　-v 标记，可以把命令执行过程中构建的包名（包含编译过程中依赖的包）打印出来，如果 go build 的是一个源码文件，则会打印出的包名为 command-line-arguments，这是编译源码文件时生成的虚拟包名，所以看到不用觉得奇怪。

　　-x 标记，可以打印编译期间所用到的所有 shell 命令。

　　-o 标记，用来指定生成文件的路径和名称。

　　-a 标记，强制重新编译。

　　-buildmode=shared 标记，这个参数可以指定当前编译生成的结果类型，如静态库和动态库。GO语言默认使用静态编译，好处是部署时非常简单，但使用动态库，可以减少分发包的大小，大家可以根据实际情况选择。注意，目前在windows下尚不支持编译成动态库。

　　更多参数，请使用 go build -h 或 go help build 查看。

2. go install 
    这个命令用于编译安装，可以作用于 main 包和非 main 包，然后将编译后的生成的执行文件存放到工程的 bin 
    录下，将生成的归档文件（即静态链接库）存放到工程的 pkg 目录下。使用方式类似于 go build，可以在某个代码包目录下直接使用，也可以指定代码包使用。

3. go run 
    编译并执行，只能作用于命令源码文件，一般用于开发中快速测试。 

4. go clean 
    该命令可以删除执行其它命令时产生的文件和目录。

5. go test 
    进行单元测试的工具，单元测试代码建议与被测试代码放在同一个代码包中，并以 "_test.go" 为后期，测试函数建议以 "Test" 为名称前缀。该命令可以对代码包进行测试，也可以指定某个测试代码文件运行（要一并带上被测试代码文件）

6. go get 
    下载第三方代码包并编译安装 

7. go doc 
    文档注释相关，可以搭建本地GO文档服务器，包含自己的项目注释，更多细节请参考：https://github.com/hyper-carrot/go_command_tutorial/blob/master/0.5.md 

8. go list 
    不加任何标记直接使用，是显示指定包的导入路径，如 go list net/http 就显示 net/http

9. go fmt 
    作用于代码包，用于格式化代码包中的代码格式，注意不包含代码包中的子代码包。如果要格式化目录下所有文件：go fmt ./..., 是 gofmt 的简单封装，相当于 gofmt -l -w ，更多信息，请通过 gofmt -h 查看

10. go fix 
    简单的说，这是一个当GO语言版本升级之后，把代码包中旧的语法更新成新版本语法的自动化工具。它是 go tool fix 的简单封装，它作用于代码包。当需要升级自己的项目或者升级下载的第三方代码包，可以使用此方法。（下载并升级代码包可以使用 go get -fix 命令 ） 

11. go vet 
    静态检查工具，这是个好东西，一般项目快完成时进行进行优化时需要，到时候再详细研究 

12. go tool pprof 
    性能检查工具，等需要时再详细研究。详见：https://github.com/hyper-carrot/go_command_tutorial/blob/master/0.12.md

13. go tool cgo 
    从 cgo的名字可以猜出，这是一个跟C语言和GO语言有关的命令，需要时再进行研究。

## Go的跨平台编译  
1. 使用： 
``` 
+build linux

package pkg
``` 
注意+build后需要空格一行  

2. 规则：  
+ 编译标签由空格分隔的编译选项(options)以"或"的逻辑关系组成
+ 每个编译选项由逗号分隔的条件项以逻辑"与"的关系组成
+ 每个条件项的名字用字母+数字表示，在前面加!表示否定的意思 